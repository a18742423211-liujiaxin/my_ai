# 环境变量配置说明

## 概述

本应用使用环境变量来安全地存储API密钥，避免在代码中明文写入敏感信息。

## 支持的API服务

### 1. 通义千问API（阿里云百炼）

- **环境变量名**: `DASHSCOPE_API_KEY`
- **获取方式**: 登录阿里云百炼平台 → API-KEY管理 → 创建新的API-KEY
- **用途**: 文本对话、思考模式、图像生成

### 2. 腾讯混元API

- **环境变量名**: `HUNYUAN_API_KEY`
- **获取方式**: 登录腾讯云 → 混元大模型 → API密钥管理
- **用途**: 文本对话

### 3. CogVideoX 视频生成API（MiniMax）

- **环境变量名**: `COGVIDEO_API_KEY`
- **获取方式**: 登录MiniMax平台 → API管理 → 创建API密钥
- **用途**: AI视频生成

## 配置方法

### 方法1: 系统环境变量（推荐）

#### Windows系统

1. 右键"此电脑" → 属性 → 高级系统设置 → 环境变量
2. 在"用户变量"或"系统变量"中点击"新建"
3. 添加以下变量：
   ```
   变量名: DASHSCOPE_API_KEY
   变量值: 你的通义千问API密钥

   变量名: HUNYUAN_API_KEY
   变量值: 你的腾讯混元API密钥

   变量名: COGVIDEO_API_KEY
   变量值: 你的CogVideoX API密钥
   ```

#### macOS/Linux系统

在 `~/.bash_profile` 或 `~/.zshrc` 中添加：

```bash
export DASHSCOPE_API_KEY="你的通义千问API密钥"
export HUNYUAN_API_KEY="你的腾讯混元API密钥"
export COGVIDEO_API_KEY="你的CogVideoX API密钥"
```

### 方法2: .env文件

1. 在项目根目录创建 `.env` 文件
2. 添加以下内容：
   ```
   DASHSCOPE_API_KEY=你的通义千问API密钥
   HUNYUAN_API_KEY=你的腾讯混元API密钥
   COGVIDEO_API_KEY=你的CogVideoX API密钥
   ```

### 方法3: 临时设置（仅当次运行有效）

#### Windows

```batch
set DASHSCOPE_API_KEY=你的通义千问API密钥
set HUNYUAN_API_KEY=你的腾讯混元API密钥
set COGVIDEO_API_KEY=你的CogVideoX API密钥
python app.py
```

#### macOS/Linux

```bash
export DASHSCOPE_API_KEY="你的通义千问API密钥"
export HUNYUAN_API_KEY="你的腾讯混元API密钥"
export COGVIDEO_API_KEY="你的CogVideoX API密钥"
python app.py
```

## 验证配置

启动应用后，如果API密钥配置正确，相应的功能将正常工作。如果配置错误，应用会提示相应的错误信息。

## 安全注意事项

1. **不要将API密钥提交到版本控制系统**
2. **不要在代码中硬编码API密钥**
3. **定期轮换API密钥**
4. **使用最小权限原则配置API密钥**
5. **确保 `.env` 文件已添加到 `.gitignore`**

## 故障排除

### 常见问题

1. **API密钥无效**: 检查密钥是否正确复制，没有多余的空格
2. **环境变量未生效**: 重启终端或IDE后重试
3. **权限不足**: 确保API密钥有足够的权限访问相应服务

### 测试环境变量

可以在Python中测试环境变量是否设置成功：

```python
import os
print("DASHSCOPE_API_KEY:", os.getenv('DASHSCOPE_API_KEY', '未设置'))
print("HUNYUAN_API_KEY:", os.getenv('HUNYUAN_API_KEY', '未设置'))
print("COGVIDEO_API_KEY:", os.getenv('COGVIDEO_API_KEY', '未设置'))
```
